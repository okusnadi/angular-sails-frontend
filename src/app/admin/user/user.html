<div data-ng-show="!user">
    <h3>Requested user not found</h3>
</div>

<div data-ng-show="user">
    <form class="form-vertical" role="form"
        data-editable-form name="editableForm"
        data-onaftersave="saveUser()"
    >
        <div class="row">
            <div class="col-lg-8">
                <h3>
                    <span style="width: 100%;"
                        data-editable-text="user.username"
                        data-e-name="user.username"
                        data-e-required
                    >
                        {{user.username}}
                    </span>

                    <span class="pull-right"
                        data-ng-show="!editableForm.$visible && currentUser.admin"
                    >
                        <a href="#"
                           data-ng-click="editableForm.$show()"
                           data-tooltip="Toggle edit mode"
                        >
                            <i class="fa fa-wrench"></i>
                        </a>
                    </span>
                </h3>
                <div class="row">
                    <div class="col-md-6">
                    <span style="width: 100%;"
                        data-editable-text="user.firstName"
                        data-e-name="user.firstName"
                        data-e-required
                    >
                        {{user.firstName}}
                    </span>
                    </div>
                    <div class="col-md-6">
                    <span style="width: 100%;"
                        data-editable-text="user.lastName"
                        data-e-name="user.lastName"
                        data-e-required
                    >
                        {{user.lastName}}
                    </span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                    <p style="width: 100%"
                        data-editable-text="user.email"
                        data-e-name="user.email"
                        data-e-required
                    >
                        {{user.email}}
                    </p>
                    </div>
                </div>
                <div class="visible-lg">
                    <div data-ng-show="editableForm.$visible">
                        <button type="submit" class="btn btn-primary"
                            data-ng-disabled="editableForm.$waiting"
                        >
                            Save
                        </button>
                        <button type="button" class="btn btn-default"
                            data-ng-disabled="editableForm.$waiting"
                            data-ng-click="editableForm.$cancel()"
                        >
                            Cancel
                        </button>
                        <button type="button" class="btn btn-danger pull-right"
                            data-ng-bootbox-title="Danger - Danger - Danger"
                            data-ng-bootbox-custom-dialog="Are you sure about the <strong>{{user.username}}</strong> user delete?"
                            data-ng-bootbox-buttons="confirmButtonsDelete"
                        >
                            Delete
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <h4 class="text-muted">Roles</h4>
                
                <span 
                    data-editable-select="user.roles"
                    data-value="1"
                    data-e-multiple 
                    data-e-name="role"
                    data-e-ng-options="r.id as r.name for r in roles"
                    data-onshow="loadRoles()"
                    >
                    <span data-ng-repeat="role in user.roles">
                                {{role.name}}
                    </span>
                </span>
                
<!--                <table class="table">
                    <tr data-ng-repeat="role in user.roles">
                        <td>
                            <a
                                data-ui-sref="admin.role({id: role.id})"
                                data-editable-select="role.id"
                                data-onshow="loadRoles()"
                                data-e-name="role.name"
                                data-e-required
                                data-e-ng-options="a.id as a.name for a in roles"
                            >
                                {{role.name}}
                            </a>
                        </td>
                        <td>
                        <button type="button" class="btn btn-danger btn-sm pull-right"
                            data-ng-show="editableForm.$visible"
                            ng-click="removeUserRole($index)"                                
                        >
                            Del
                        </button>
                        </td>
                    </tr>
                    <tfoot>
                      <button class="btn btn-default btn-sm" ng-click="addUserRole()">Add role</button>                      
                    </tfoot>
                </table>-->

                <div class="hidden-lg">
                    <div data-ng-show="editableForm.$visible">
                        <button type="submit" class="btn btn-primary"
                            data-ng-disabled="editableForm.$waiting"
                        >
                            Save
                        </button>
                        <button type="button" class="btn btn-default"
                            data-ng-disabled="editableForm.$waiting"
                            data-ng-click="editableForm.$cancel()"
                        >
                            Cancel
                        </button>
                        <button type="button" class="btn btn-danger pull-right"
                            data-ng-bootbox-confirm="Are you sure about the user delete?"
                            data-ng-bootbox-confirm-action="deleteUser()"
                        >
                            Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>